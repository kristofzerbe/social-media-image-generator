# social-media-image-generator

If you run a website generated by a SSE (Statice Site generator like [hexo](https://hexo.io/), which supports Frontmatter, and want to generate social media images out of your post images, then this script is for you.

[![GitHub package.json version](https://img.shields.io/github/package-json/v/kristofzerbe/social-media-image-generator?label=version&style=flat-square)](https://github.com/kristofzerbe/social-media-image-generator/blob/main/package.json)
[![issues](https://img.shields.io/github/issues/kristofzerbe/social-media-image-generator?label=github%20issues&style=flat-square)](https://github.com/kristofzerbe/social-media-image-generator/issues)

# Prerequisites

You need [node.js](https://nodejs.org/en/) 14 or higher, because this script is realized as an ES module.
# Installation

This script depends on 5 NPM packages, you need to install:

* [npm install --save front-matter](https://www.npmjs.com/package/front-matter) - Parsing your posts Front-Matter
* [npm install --save handlebars](https://www.npmjs.com/package/handlebars) - Templating for the temporary HTML file
* [npm install --save puppeteer](https://www.npmjs.com/package/puppeteer) - Generates screenshot from temporary HTML file via headless Chromium
* [npm install --save imagemin](https://www.npmjs.com/package/imagemin) - Optimize output PNG file
* [npm install --save imagemin-pngquant](https://www.npmjs.com/package/imagemin-pngquant) - Plugin fpr imagemin

The script itself needs no installation. Just store it in your project where you want.

# Setup

## Post Frontmatter

The Frontmatter of each post, has to have at least 3 entries:

* ``title`` - Title of the post
* ``subtitle`` - Subtitle of the post (optonal; can be empty)
* ``photograph.file`` - Filename (only) of the image related to this post

```md
---
title: 'Test 2'
subtitle: 'A simple Subtitle'
photograph:
  file: DSC_9368.jpg
---
```

## Photograph Folder

All you photographs have to be stored in one specific folder, where the script is looking for the given ``photograph.file`` out of the posts Frontmatter.

# Run the script

In the repository you will find an ``index.js``, which executes the generation script ``social-media-image-generator.js`` via node.js in the console. The generator has 4 parameters:

1. postFolder - Folder with your posts MD files
2. photoFolder - Folder with your photographs
3. templateFile - HTML template file, with variables for Handlebars
4. targetFolder - Folder to store the generated social media images

The ``postFolder`` is processed recursively, so you can have much subfolders with MD files as you want.

For example:
```js
node index.js "./source/_posts" "./photos" "./template.handlebars" "./social-media-images"
```

Only those posts with be processed, which have an existing ``photograph.file`` defined in the Frontmatter and in case the corresponding social media file is not existing.

## Hexo integration

...